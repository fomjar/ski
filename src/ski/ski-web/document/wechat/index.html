<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'/>
        <meta name='viewport' content='width=device-width,initial-scale=1,user-scalable=0'/>
        <title>ğŸ”å…¨æœç´¢</title>
        <link rel='stylesheet' href='/css/weui.css'/>
        <link rel='stylesheet' href='/css/jquery-ui.css'/>
        <link rel='stylesheet' href='/css/theme.css'/>
        <script type='text/javascript' src='/js/jquery.js'></script>
        <script type='text/javascript' src='/js/jquery.json.js'></script>
        <script type='text/javascript' src='/js/jquery.cookie.js'></script>
        <script type='text/javascript' src='/js/jquery-ui.js'></script>
        <script type='text/javascript' src='/js/ski.js'></script>
        <script type='text/javascript'>
        
            $(document).ready(function() {
                setup();
				$('#search_input').bind('focus', function() {
					$('#search_bar').addClass('weui_search_focusing');
				});
				$('#search_input').bind('blur', function() {
					if (0 == $('#search_input').val().length) {
						$('#search_bar').removeClass('weui_search_focusing');
					}
				});

                $('#categories').menu();
            });

            function preset() {
                $('#result').html(
                    "<div style='margin: 10px; margin-bottom: 0px'><a href='query_game.html?key=tag&val=åä½³ç²¾å½©æ¸¸æˆ'>  <img width='100%' src='res/åä½³ç²¾å½©æ¸¸æˆ.jpg'/></a></div>"
                  + "<div style='margin: 10px; margin-bottom: 0px'><a href='query_game.html?key=tag&val=å¾®ä¿¡ONLY'>      <img width='100%' src='res/å¾®ä¿¡ONLY.jpg'/></a></div>"
                  + "<div style='margin: 10px; margin-bottom: 0px'><a href='query_game.html?key=tag&val=å¤§ç‰Œæ¸¸æˆ'>      <img width='100%' src='res/å¤§ç‰Œæ¸¸æˆ.jpg'/></a></div>"
                  + "<div style='margin: 10px; margin-bottom: 0px'><a href='query_game.html?key=tag&val=æ¸¸æˆè‰ºæœ¯'>      <img width='100%' src='res/æ¸¸æˆè‰ºæœ¯.jpg'/></a></div>"
                  + "<div style='margin: 10px; margin-bottom: 0px'><a href='query_game.html?key=category&val=åŠ¨ä½œ'>     <img width='100%' src='res/åŠ¨ä½œæ¸¸æˆ.jpg'/></a></div>"
                  + "<div style='margin: 10px; margin-bottom: 0px'><a href='query_game.html?key=category&val=èµ›è½¦'>     <img width='100%' src='res/é€Ÿåº¦ä¸æ¿€æƒ….jpg'/></a></div>"
                  + "<div style='margin: 10px; margin-bottom: 0px'><a href='query_game.html?key=category&val=è§’è‰²æ‰®æ¼”'> <img width='100%' src='res/ç²¾å½©çš„è§’è‰²æ‰®æ¼”æ¸¸æˆ.jpg'/></a></div>"
                );
            }

            function search(word) {
                ski.ui.show_toast('æ­£åœ¨æœç´¢');
                ski.common.query_game({word : word}, function(args) {
                    ski.ui.hide_toast();
                    if (0 != args.code) {
                        ski.ui.show_dialog_alert({
                            head : "æœç´¢å¤±è´¥",
                            body : args.desc
                        });
                        return;
                    }
                    var games = args.desc;
                    var title = document.createElement('div');
                    title.className = 'weui_panel_hd';
                    title.innerText = 'æœç´¢ç»“æœ';

                    var cells = document.createElement('div');
                    cells.className = 'weui_panel_bd';
                    for (var i in games) {
                        var game = games[i];
                        var cell = "<a class='weui_media_box weui_media_appmsg' href=\"javascript: ski.goto.game(" + game.gid + ");\">"
                                     + "<div class='weui_media_hd'><img class='weui_media_appmsg_thumb' src='" + game.url_icon + "'></div>"
                                     + "<div class='weui_media_bd'>"
                                        + "<h4 class='weui_media_title'>" + game.name_zh_cn + "</h4>"
                                        + "<p class='weui_media_desc'>" + game.introduction + "</p>"
                                     + "</div>"
                                     + "<div style='position: absolute; width: 70px; top: 20px; right: 20px'><table width='100%'><tr>"
                                         + "<td><div class='" + (game.rent_avail_a ? "rent_enable" : "rent_disable") + "'>è®¤è¯</div></td>"
                                         + "<td><div class='" + (game.rent_avail_b ? "rent_enable" : "rent_disable") + "'>ä¸è®¤è¯</div></td>"
                                     + "</tr></table></div>"
                                 + "</a>";
                        cells.innerHTML = cells.innerHTML + cell;
                    }
                    $('#result').html(title);
                    $('#result').append(cells);
                });
            }
			
            function setup() {
                var word   = $('#search_input').val().replace(/(^\s*)|(\s*$)/g, "");

                if (0 == word.length) {
                    preset();
                } else {
                    search(word);
                }
            }
			
			function oncancel() {
				$('#search_input').val('');
				$('#search_input').blur();
				setup();
			}
			
			var toggle_on = false;
			
			function toggle_category() {
				if (toggle_on) {
                    $('.weui_mask_transparent').hide(); 
					$('#categories').animate({opacity : '0', top : '-'+$('#categories').height()+'px'});
					toggle_on = false;
				} else {
                    $('.weui_mask_transparent').show(); 
					$('#categories').css({opacity : 0, top : '-'+$('#categories').height()+'px'});
					$('#categories').animate({opacity : 1, top : ($('#search_bar').outerHeight(true)-1)+'px'});
					toggle_on = true;
				}
			}
			
        </script>
        <style type="text/css">
            td {
                white-space     : nowrap;
            }
            .rent_enable {
                text-align      : center;
                font-size       : 10px;
                color           : white;
                background      : #00C802;
                -webkit-border-radius   : 6px;
                -moz-border-radius      : 6px;
            }
            .rent_disable {
                text-align      : center;
                font-size       : 10px;
                color           : white;
                background      : #B2B2B2;
                -webkit-border-radius   : 6px;
                -moz-border-radius      : 6px;
            }
            .td_cat_h {
                background  : #eeeeee;
                border      : 1px solid darkgray;
            }
            .td_cat_l {
                background  : #dddddd;
                border      : 1px solid darkgray;
            }
            div table tr td a div {
                padding-top     : 8px;
                padding-bottom  : 8px;
                padding-left    : 24px;
                padding-right   : 24px;
                text-align	: center;
            }
            li ul {
                height      : 300px;
                overflow    : auto;
            }
            li div a {
                width       : 100%;
                height      : 100%;
            }
            li div a div {
                width       : 100%;
                height      : 100%;
                white-space : nowrap;
            }
        </style>
    </head>
    <body>
        <div class='panel'>
            <div class='bd'>
                <div class="weui_search_bar" style='position: fixed; z-index: 10; width: 100%; top: 0px; background: lightgray; border-top: 1px solid #aaa; border-bottom: 1px solid #aaa' id="search_bar">
                	<div id='toggle_switch' class='weui_btn weui_btn_mini weui_btn_primary' style='float: left; position: relative; width: 100px; margin-right: 8px; ' onclick="toggle_category();">åˆ†ç±» â–¼</div>
                    <div class="weui_search_outer" style='background: lightgray'>
                        <div class="weui_search_inner">
                            <i class="weui_icon_search"></i>
                            <input class="weui_search_input" id='search_input' required type="search" placeholder="æœç´¢" onkeyup="if(13 == event.keyCode) setup();" >
                            <a class="weui_icon_clear" id="search_clear" href="javascript:$('#search_input').val('');$('#search_input').focus();setup();"></a>
                        </div>
                        <label class="weui_search_text" id="search_text" for="search_input">
                            <i class="weui_icon_search"></i>
                            <span>æœç´¢</span>
                        </label>
                    </div>
                   	<a class="weui_search_cancel" id="search_cancel" href="javascript: oncancel();">å–æ¶ˆ</a>
                </div>
                <div class='weui_mask_transparent' style='z-index: 5; display: none;' onclick="toggle_category()"></div>
                <ul id='categories' style='position: fixed; z-index: 6; left: 0px; top: 9999px;'>
                    <li><div><a href='query_game.html?key=tag&val=æœ€è¿‘ä¸Šæ–°'>     <div>æœ€è¿‘ä¸Šæ–°</div></a></div></li>
                    <li><div><a href='query_game.html?key=tag&val=åä½³ç²¾å½©æ¸¸æˆ'> <div>åä½³ç²¾å½©æ¸¸æˆ</div></a></div></li>
                    <li><div><a href='query_game.html?key=tag&val=é€Ÿåº¦ä¸æ¿€æƒ…'>   <div>é€Ÿåº¦ä¸æ¿€æƒ…</div></a></div></li>
                    <li><div><a href='query_game.html?key=tag&val=æ¸¸æˆè‰ºæœ¯'>     <div>æ¸¸æˆè‰ºæœ¯</div></a></div></li>
                    <li><div>æŒ‰ç±»å‹åˆ†</div>
                        <ul>
                            <li><div><a href='query_game.html?key=category&val=åŠ¨ä½œ'>       <div>åŠ¨ä½œ</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=å°„å‡»'>       <div>å°„å‡»</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=è§’è‰²æ‰®æ¼”'>   <div>è§’è‰²æ‰®æ¼”</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=å†’é™©'>       <div>å†’é™©</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=èµ›è½¦'>       <div>èµ›è½¦</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=ç­–ç•¥'>       <div>ç­–ç•¥</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=æ ¼æ–—'>       <div>æ ¼æ–—</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=ç›Šæ™º'>       <div>ç›Šæ™º</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=ææ€–'>       <div>ææ€–</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=æ¨¡æ‹Ÿ'>       <div>æ¨¡æ‹Ÿ</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=ä¼‘é—²'>       <div>ä¼‘é—²</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=éŸ³ä¹'>       <div>éŸ³ä¹</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=å…¶ä»–'>       <div>å…¶ä»–</div></a></div></li>
                            <li><div><a href='query_game.html?key=category&val=ä½“è‚²'>       <div>ä½“è‚²</div></a></div></li>
                        </ul>
                    </li>
                    <li><div>å…¬å¸ä½œå“</div>
                        <ul>
                            <li><div><a href='query_game.html?key=vendor&val=Electronic_Arts'>              <div>EA</div></a></div></li>
                            <li><div><a href='query_game.html?key=vendor&val=CAPCOM'>                       <div>CAPCOM(å¡æ™®ç©º)</div></a></div></li>
                            <li><div><a href='query_game.html?key=vendor&val=Ubisoft_Entertainment'>        <div>Ubisoft(è‚²ç¢§)</div></a></div></li>
                            <li><div><a href='query_game.html?key=vendor&val=Bethesda_Softworks'>           <div>Bethesda</div></a></div></li>
                            <li><div><a href='query_game.html?key=vendor&val=Naughty_Dog'>                  <div>Naughty Dog(é¡½çš®ç‹—)</div></a></div></li>
                            <li><div><a href='query_game.html?key=vendor&val=SQUARE_ENIX'>                  <div>Square-Enix</div></a></div></li>
                            <li><div><a href='query_game.html?key=vendor&val=Blizzard_Entertainment'>       <div>Blizzard(åŠ¨è§†æš´é›ª)</div></a></div></li>
                            <li><div><a href='query_game.html?key=vendor&val=SEGA_Games'>                   <div>SEGA(ä¸–å˜‰)</div></a></div></li>
                            <li><div><a href='query_game.html?key=vendor&val=BANDAI_NAMCO_Entertainment'>   <div>BANDAI NAMCO(ç™¾ä»£å—æ¢¦å®«)</div></a></div></li>
                            <li><div><a href='query_game.html?key=vendor&val=Konami_Digital'>               <div>KONAMI(æŸ¯çº³ç±³)</div></a></div></li>
                        </ul>
                    </li>
                    <li><div><a href='query_game.html?key=word&val='>     <div>æ‰€æœ‰æ¸¸æˆ</div></a></div></li>
                </ul>
                <div class="weui_panel weui_panel_access" style='position: relative; top: 34px' id='result'></div>
            </div>
        </div>
    </body>
</html>
